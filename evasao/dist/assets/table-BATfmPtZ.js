import{a as x,j as e,c as U}from"./client-uL4xmIh0.js";const _=()=>{const[d,j]=x.useState("FISCALIZAÇÃO"),[b,v]=x.useState([]),[w,I]=x.useState(!0),[y,T]=x.useState(""),[N,k]=x.useState(!1),[u,C]=x.useState("");x.useEffect(()=>{const t=["/data/dados.csv","/evasao/data/dados.csv","data/dados.csv","./data/dados.csv","/evasao/dist/data/dados.csv","/evasao/dist/assets/dados.csv","/evasao/dados.csv","/dados.csv","dist/data/dados.csv","assets/dados.csv"],a=s=>{const o=s.split(/\r?\n/).filter(n=>n.trim()!=="");if(o.length===0)return[];const p=n=>{const g=[];let l="",i=!1;for(let c=0;c<n.length;c++){const O=n[c];if(O==='"'){i&&n[c+1]==='"'?(l+='"',c++):i=!i;continue}if(O===";"&&!i){g.push(l),l="";continue}l+=O}return g.push(l),g},h=o[0],A=p(h).map(n=>n.trim()),m=[];for(let n=1;n<o.length;n++){const g=o[n],l=p(g);for(;l.length<A.length;)l.push("");const i={};for(let c=0;c<A.length;c++)i[A[c]]=l[c]?l[c].trim():"";m.push(i)}return m};async function r(){for(const s of t)try{const o=s+(s.includes("?")?"&":"?")+`_ts=${Date.now()}`,p=await fetch(o,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!p.ok)continue;let h=await p.text();h=h.replace(/^\uFEFF/,"");const A=a(h);if(!Array.isArray(A)||A.length===0)continue;console.log("Dados carregados:",A.length,"registros"),v(A),I(!1);return}catch(o){console.debug("Falha ao carregar",s,o)}console.warn("Não foi possível carregar dados.csv"),I(!1)}r()},[]);const f=x.useMemo(()=>{if(!b||b.length===0)return["FISCALIZAÇÃO"];const a=Array.from(new Set(b.map(r=>r.ÁREA||r.AREA||"Outros"))).sort();return a.includes("FISCALIZAÇÃO")?["FISCALIZAÇÃO",...a.filter(r=>r!=="FISCALIZAÇÃO")]:a},[b]);x.useEffect(()=>{f.length>0&&!f.includes(d)&&j(f[0])},[f,d]),x.useEffect(()=>{C("")},[d]);const E=x.useMemo(()=>{if(!b||b.length===0)return[];let t=b.filter(r=>(r.ÁREA||r.AREA||"Outros")===d);y.trim()&&(t=t.filter(r=>(r.NOME||r["Nome do Candidato"]||"").toLowerCase().includes(y.toLowerCase()))),N&&(t=t.filter(r=>(r.PCD||"").toUpperCase()==="SIM")),u&&(t=t.filter(r=>(r.SITUACAO||"???").toUpperCase()===u.toUpperCase()));const a=r=>{if(!r||typeof r!="string")return null;const s=r.split("/");if(s.length!==3)return null;const o=Number(s[0]),p=Number(s[1])-1,h=Number(s[2]);return isNaN(o)||isNaN(p)||isNaN(h)?null:new Date(h,p,o)};return t.sort((r,s)=>{if(d==="VETERANO"){const h=r.DATA_PUBLICACAO_EXONERACAO||r["DATA PUBLICACAO EXONERAÇÃO"]||"",A=s.DATA_PUBLICACAO_EXONERACAO||s["DATA PUBLICACAO EXONERAÇÃO"]||"",m=a(h),n=a(A);if(m&&n){const D=n.getTime()-m.getTime();if(D!==0)return D}else{if(m&&!n)return-1;if(!m&&n)return 1}const g=r.DATA_PUBLICACAO_INATIVIDADE||r["DATA PUBLICACAO INATIVIDADE"]||"",l=s.DATA_PUBLICACAO_INATIVIDADE||s["DATA PUBLICACAO INATIVIDADE"]||"",i=a(g),c=a(l);if(i&&c)return c.getTime()-i.getTime();if(i&&!c)return-1;if(!i&&c)return 1;const O=(r.NOME||"").toString(),P=(s.NOME||"").toString();return O.localeCompare(P)}const o=parseInt(r.POSICAO_CONCURSO||r["POSICAO CONCURSO"]||"0"),p=parseInt(s.POSICAO_CONCURSO||s["POSICAO CONCURSO"]||"0");return o-p})},[b,d,y,N,u]),R=(t,a)=>{const r=a%2===0,s=(t==null?void 0:t.toUpperCase())||"???",o={"EM EXERCÍCIO":r?"bg-green-200":"bg-green-200/75",EXONERADO:r?"bg-red-200":"bg-red-200/85",DESISTENTE:r?"bg-orange-200":"bg-orange-200/85","INAPTO ADMISSIONAL":r?"bg-fuchsia-200":"bg-fuchsia-200/85",APOSENTADO:r?"bg-purple-400":"bg-purple-400/85","AFASTAMENTO PRELIMINAR À APOSENTADORIA":r?"bg-teal-200":"bg-teal-200/85","???":r?"bg-white":"bg-gray-100"};return o[s]||o["???"]};return e.jsx("div",{className:"min-h-screen bg-gray-50 text-gray-900 p-2",children:e.jsxs("div",{className:"w-full max-w-none",children:[e.jsx("div",{className:"mb-2",children:e.jsx("a",{href:"/evasao/dist/index.html",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200 shadow-sm",children:"← Voltar ao Dashboard"})}),e.jsx("header",{className:"text-center mb-3",children:e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Auditores Fiscais da Receita Estadual de Minas Gerais"})}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Filtrar por área:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:f.map(t=>e.jsx("button",{onClick:()=>j(t),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400 ${d===t?"bg-red-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300 shadow-sm"}`,children:t},t))})]}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Buscar por nome:"}),e.jsx("input",{type:"text",value:y,onChange:t=>T(t.target.value),placeholder:"Digite o nome do candidato...",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400 w-80 max-w-full"})]}),!w&&E.length>0&&e.jsx("div",{className:"mb-4 text-center text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center items-center",children:[e.jsx("button",{onClick:()=>C(""),className:`px-2 py-1 rounded text-xs transition-colors ${u===""?"bg-blue-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Todos"}),Object.entries(E.reduce((t,a)=>{const r=a.SITUACAO||"???";return t[r]=(t[r]||0)+1,t},{})).map(([t,a])=>e.jsxs("button",{onClick:()=>C(u===t?"":t),className:`px-2 py-1 rounded text-xs transition-colors ${u===t?"bg-red-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[t,": ",e.jsx("span",{className:"font-semibold",children:a})]},t))]})}),e.jsx("div",{className:"bg-white shadow-lg border border-black",children:e.jsx("div",{className:"overflow-x-auto max-h-[80vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-[10px] border-collapse border border-black",children:[e.jsx("thead",{className:"bg-white text-gray-700 uppercase text-[10px] sticky top-0 z-50 shadow-sm",children:e.jsx("tr",{children:d==="VETERANO"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-1 py-1 text-left font-semibold border border-black bg-white",children:"NOME"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"SITUAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"ÓRGÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA EXONERAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA DE PUBLICAÇÃO DA EXONERAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA INATIVIDADE"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA DE PUBLICAÇÃO DA INATIVIDADE"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"OBSERVAÇÃO"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Pos."}),e.jsx("th",{className:"px-1 py-1 text-left font-semibold border border-black bg-white",children:"Nome"}),e.jsx("th",{className:"px-0.5 py-1 text-center font-semibold border border-black bg-white",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("span",{children:"PCD"}),e.jsx("button",{onClick:()=>k(!N),className:`text-[9px] px-0.5 py-0.5 rounded transition-colors ${N?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:N?"Mostrar todos":"Filtrar apenas PCDs",children:e.jsx("i",{className:"fas fa-filter"})})]})}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Situação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Órgão"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Publicação da Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação Sem Efeito"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Observação"})]})})}),e.jsx("tbody",{className:"divide-y divide-black",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:d==="VETERANO"?6:10,className:"px-4 py-6 text-center text-orange-600 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600"}),e.jsx("span",{children:"Carregando dados..."})]})})}):E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:d==="VETERANO"?6:10,className:"px-4 py-6 text-center text-gray-500 border border-black",children:b&&b.length>0?`Nenhum candidato encontrado para a área ${d}`:"Nenhum dado disponível. Verifique se o arquivo dados.csv foi carregado."})}):E.map((t,a)=>e.jsx("tr",{className:`${R(t.SITUACAO,a)} hover:brightness-95 hover:shadow-md transition-all duration-150`,children:d==="VETERANO"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-1 py-0.5 font-medium text-gray-900 text-[10px] border border-black text-left",children:t.NOME||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.SITUACAO||"???"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-700 text-[10px] border border-black text-center",children:t.ORGAO_DESTINO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_EXONERACAO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_EXONERACAO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_INATIVIDADE||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_INATIVIDADE||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-600 text-[10px] border border-black text-center whitespace-normal",children:t.OBSERVACAO||"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap font-medium text-gray-800 text-[10px] border border-black text-center",children:t.POSICAO_CONCURSO||"-"}),e.jsx("td",{className:"px-1 py-0.5 font-medium text-gray-900 text-[10px] border border-black text-left",children:t.NOME||"-"}),e.jsx("td",{className:"px-0.5 py-0.5 whitespace-nowrap text-center text-[10px] border border-black text-gray-700",children:(t.PCD||"").toUpperCase()==="SIM"?"SIM":"NÃO"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.SITUACAO||"???"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-700 text-[10px] border border-black text-center",children:t.ORGAO_DESTINO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_NOMEACAO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_EXONERACAO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_EXONERACAO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_NOMEACAO_SEM_EFEITO||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-600 text-[10px] border border-black text-center whitespace-normal",children:t.OBSERVACAO||"-"})]})},`${t.INSCRICAO||a}`))})]})})}),e.jsx("footer",{className:"text-center mt-8 text-gray-500 text-sm",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," Observatório da Evasão. Dados extraídos do Diário Oficial de Minas Gerais e outras fontes públicas."]})})]})})},S=document.getElementById("root");S&&U.createRoot(S).render(e.jsx(_,{}));

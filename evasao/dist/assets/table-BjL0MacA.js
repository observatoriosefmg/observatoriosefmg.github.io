import{a as x,j as e,c as P}from"./client-uL4xmIh0.js";const B=()=>{const[d,I]=x.useState("FISCALIZAÇÃO"),[b,S]=x.useState([]),[j,w]=x.useState(!0),[E,v]=x.useState(""),[O,R]=x.useState(!1),[N,y]=x.useState("");x.useEffect(()=>{const t=["/data/dados.csv","/evasao/data/dados.csv","data/dados.csv","./data/dados.csv","/evasao/dist/data/dados.csv","/evasao/dist/assets/dados.csv","/evasao/dados.csv","/dados.csv","dist/data/dados.csv","assets/dados.csv"],a=s=>{const o=s.split(/\r?\n/).filter(n=>n.trim()!=="");if(o.length===0)return[];const A=n=>{const m=[];let l="",i=!1;for(let c=0;c<n.length;c++){const f=n[c];if(f==='"'){i&&n[c+1]==='"'?(l+='"',c++):i=!i;continue}if(f===";"&&!i){m.push(l),l="";continue}l+=f}return m.push(l),m},p=o[0],h=A(p).map(n=>n.trim()),g=[];for(let n=1;n<o.length;n++){const m=o[n],l=A(m);for(;l.length<h.length;)l.push("");const i={};for(let c=0;c<h.length;c++)i[h[c]]=l[c]?l[c].trim():"";g.push(i)}return g};async function r(){for(const s of t)try{const o=s+(s.includes("?")?"&":"?")+`_ts=${Date.now()}`,A=await fetch(o,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!A.ok)continue;let p=await A.text();p=p.replace(/^\uFEFF/,"");const h=a(p);if(!Array.isArray(h)||h.length===0)continue;console.log("Dados carregados:",h.length,"registros"),S(h),w(!1);return}catch(o){console.debug("Falha ao carregar",s,o)}console.warn("Não foi possível carregar dados.csv"),w(!1)}r()},[]);const u=x.useMemo(()=>{if(!b||b.length===0)return["FISCALIZAÇÃO"];const a=Array.from(new Set(b.map(r=>r.ÁREA||r.AREA||"Outros"))).sort();return a.includes("FISCALIZAÇÃO")?["FISCALIZAÇÃO",...a.filter(r=>r!=="FISCALIZAÇÃO")]:a},[b]);x.useEffect(()=>{u.length>0&&!u.includes(d)&&I(u[0])},[u,d]),x.useEffect(()=>{y("")},[d]);const C=x.useMemo(()=>{if(!b||b.length===0)return[];let t=b.filter(r=>(r.ÁREA||r.AREA||"Outros")===d);E.trim()&&(t=t.filter(r=>(r.NOME||r["Nome do Candidato"]||"").toLowerCase().includes(E.toLowerCase()))),O&&(t=t.filter(r=>(r.PCD||"").toUpperCase()==="SIM")),N&&(t=t.filter(r=>(r.SITUACAO||r.SITUAÇÃO||"-").toUpperCase()===N.toUpperCase()));const a=r=>{if(!r||typeof r!="string")return null;const s=r.split("/");if(s.length!==3)return null;const o=Number(s[0]),A=Number(s[1])-1,p=Number(s[2]);return isNaN(o)||isNaN(A)||isNaN(p)?null:new Date(p,A,o)};return t.sort((r,s)=>{if(d==="VETERANO"){const p=r.DATA_PUBLICACAO_EXONERACAO||r["DATA PUBLICACAO EXONERAÇÃO"]||"",h=s.DATA_PUBLICACAO_EXONERACAO||s["DATA PUBLICACAO EXONERAÇÃO"]||"",g=a(p),n=a(h);if(g&&n){const D=n.getTime()-g.getTime();if(D!==0)return D}else{if(g&&!n)return-1;if(!g&&n)return 1}const m=r.DATA_PUBLICACAO_INATIVIDADE||r["DATA PUBLICACAO INATIVIDADE"]||"",l=s.DATA_PUBLICACAO_INATIVIDADE||s["DATA PUBLICACAO INATIVIDADE"]||"",i=a(m),c=a(l);if(i&&c)return c.getTime()-i.getTime();if(i&&!c)return-1;if(!i&&c)return 1;const f=(r.NOME||"").toString(),U=(s.NOME||"").toString();return f.localeCompare(U)}const o=parseInt(r.POSICAO_CONCURSO||r["POSICAO CONCURSO"]||"0"),A=parseInt(s.POSICAO_CONCURSO||s["POSICAO CONCURSO"]||"0");return o-A})},[b,d,E,O,N]),k=(t,a)=>{const r=a%2===0,s=(t==null?void 0:t.toUpperCase())||"-",o={"EM EXERCÍCIO":r?"bg-green-200":"bg-green-200/75",EXONERADO:r?"bg-red-200":"bg-red-200/85",DESISTENTE:r?"bg-orange-200":"bg-orange-200/85","INAPTO ADMISSIONAL":r?"bg-fuchsia-200":"bg-fuchsia-200/85",APOSENTADO:r?"bg-purple-400":"bg-purple-400/85","AFASTAMENTO PRELIMINAR À APOSENTADORIA":r?"bg-teal-200":"bg-teal-200/85","-":r?"bg-white":"bg-gray-100"};return o[s]||o["-"]};return e.jsx("div",{className:"min-h-screen bg-gray-50 text-gray-900 p-2",children:e.jsxs("div",{className:"w-full max-w-none",children:[e.jsx("div",{className:"mb-2",children:e.jsx("a",{href:"/evasao/dist/index.html",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200 shadow-sm",children:"← Voltar ao Dashboard"})}),e.jsx("header",{className:"text-center mb-3",children:e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Auditores Fiscais da Receita Estadual de Minas Gerais"})}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Filtrar por área:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:u.map(t=>e.jsx("button",{onClick:()=>I(t),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400 ${d===t?"bg-red-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300 shadow-sm"}`,children:t},t))})]}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Buscar por nome:"}),e.jsx("input",{type:"text",value:E,onChange:t=>v(t.target.value),placeholder:"Digite o nome do candidato...",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400 w-80 max-w-full"})]}),!j&&C.length>0&&e.jsx("div",{className:"mb-4 text-center text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center items-center",children:[e.jsx("button",{onClick:()=>y(""),className:`px-2 py-1 rounded text-xs transition-colors ${N===""?"bg-blue-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Todos"}),Object.entries(C.reduce((t,a)=>{const r=a.SITUACAO||a.SITUAÇÃO||"-";return t[r]=(t[r]||0)+1,t},{})).map(([t,a])=>e.jsxs("button",{onClick:()=>y(N===t?"":t),className:`px-2 py-1 rounded text-xs transition-colors ${N===t?"bg-red-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[t,": ",e.jsx("span",{className:"font-semibold",children:a})]},t))]})}),e.jsx("div",{className:"bg-white shadow-lg border border-black",children:e.jsx("div",{className:"overflow-x-auto max-h-[80vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-[10px] border-collapse border border-black",children:[e.jsx("thead",{className:"bg-white text-gray-700 uppercase text-[10px] sticky top-0 z-50 shadow-sm",children:e.jsx("tr",{children:d==="VETERANO"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-1 py-1 text-left font-semibold border border-black bg-white",children:"NOME"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"SITUAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"ÓRGÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA EXONERAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA DE PUBLICAÇÃO DA EXONERAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA INATIVIDADE"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA DE PUBLICAÇÃO DA INATIVIDADE"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"OBSERVAÇÃO"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Pos."}),e.jsx("th",{className:"px-1 py-1 text-left font-semibold border border-black bg-white",children:"Nome"}),e.jsx("th",{className:"px-0.5 py-1 text-center font-semibold border border-black bg-white",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("span",{children:"PCD"}),e.jsx("button",{onClick:()=>R(!O),className:`text-[9px] px-0.5 py-0.5 rounded transition-colors ${O?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:O?"Mostrar todos":"Filtrar apenas PCDs",children:e.jsx("i",{className:"fas fa-filter"})})]})}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Situação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Órgão"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Publicação da Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação Sem Efeito"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Observação"})]})})}),e.jsx("tbody",{className:"divide-y divide-black",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:d==="VETERANO"?6:10,className:"px-4 py-6 text-center text-orange-600 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600"}),e.jsx("span",{children:"Carregando dados..."})]})})}):C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:d==="VETERANO"?6:10,className:"px-4 py-6 text-center text-gray-500 border border-black",children:b&&b.length>0?`Nenhum candidato encontrado para a área ${d}`:"Nenhum dado disponível. Verifique se o arquivo dados.csv foi carregado."})}):C.map((t,a)=>e.jsx("tr",{className:`${k(t.SITUACAO||t.SITUAÇÃO,a)} hover:brightness-95 hover:shadow-md transition-all duration-150`,children:d==="VETERANO"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-1 py-0.5 font-medium text-gray-900 text-[10px] border border-black text-left",children:t.NOME||t["Nome do Candidato"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.SITUACAO||t.SITUAÇÃO||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-700 text-[10px] border border-black text-center",children:t.ÓRGÃO||t.ORGAO_DESTINO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_EXONERACAO||t["DATA EXONERACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_EXONERACAO||t["DATA PUBLICACAO EXONERAÇÃO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_INATIVIDADE||t["DATA INATIVIDADE"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_INATIVIDADE||t["DATA PUBLICACAO INATIVIDADE"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-600 text-[10px] border border-black text-center whitespace-normal",children:t.OBSERVAÇÃO||t.OBSERVACAO||"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap font-medium text-gray-800 text-[10px] border border-black text-center",children:t.POSICAO_CONCURSO||t["POSICAO CONCURSO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 font-medium text-gray-900 text-[10px] border border-black text-left",children:t.NOME||t["Nome do Candidato"]||"-"}),e.jsx("td",{className:"px-0.5 py-0.5 whitespace-nowrap text-center text-[10px] border border-black text-gray-700",children:(t.PCD||"").toUpperCase()==="SIM"?"SIM":"NÃO"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.SITUACAO||t.SITUAÇÃO||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-700 text-[10px] border border-black text-center",children:t.ÓRGÃO||t.ORGAO_DESTINO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t["DATA NOMEAÇÃO"]||t["DATA NOMEACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_EXONERACAO||t["DATA EXONERACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_EXONERACAO||t["DATA PUBLICACAO EXONERAÇÃO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_NOMEACAO_SEM_EFEITO||t["DATA NOMEACAO SEM EFEITO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-600 text-[10px] border border-black text-center whitespace-normal",children:t.OBSERVAÇÃO||t.OBSERVACAO||"-"})]})},`${t.INSCRIÇÃO||t.INSCRICAO||a}`))})]})})}),e.jsx("footer",{className:"text-center mt-8 text-gray-500 text-sm",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," Observatório da Evasão. Dados extraídos do Diário Oficial de Minas Gerais e outras fontes públicas."]})})]})})},T=document.getElementById("root");T&&P.createRoot(T).render(e.jsx(B,{}));

import{a as c,j as e,c as k}from"./client-uL4xmIh0.js";const M=()=>{const[p,C]=c.useState("FISCALIZAÇÃO"),[l,I]=c.useState([]),[j,S]=c.useState(!0),[f,D]=c.useState(""),[A,R]=c.useState(!1),[O,y]=c.useState("");c.useEffect(()=>{const t=["/data/dados.csv","/evasao/data/dados.csv","data/dados.csv","./data/dados.csv","/evasao/dist/data/dados.csv","/evasao/dist/assets/dados.csv","/evasao/dados.csv","/dados.csv","dist/data/dados.csv","assets/dados.csv"],r=x=>{const n=x.split(/\r?\n/).filter(d=>d.trim()!=="");if(n.length===0)return[];const g=d=>{const u=[];let i="",s=!1;for(let o=0;o<d.length;o++){const b=d[o];if(b==='"'){s&&d[o+1]==='"'?(i+='"',o++):s=!s;continue}if(b===";"&&!s){u.push(i),i="";continue}i+=b}return u.push(i),u},N=n[0],h=g(N).map(d=>d.trim()),w=[];for(let d=1;d<n.length;d++){const u=n[d],i=g(u);for(;i.length<h.length;)i.push("");const s={};for(let b=0;b<h.length;b++)s[h[b]]=i[b]?i[b].trim():"";const o={...s};s.NOME&&(o["Nome do Candidato"]=s.NOME),s["NOME DO CANDIDATO"]&&(o["Nome do Candidato"]=s["NOME DO CANDIDATO"]),s.SITUAÇÃO&&(o.SITUACAO=s.SITUAÇÃO),s.SITUACAO&&(o.SITUACAO=s.SITUACAO),s["ÓRGÃO DESTINO"]&&(o.ÓRGÃO=s["ÓRGÃO DESTINO"]),s["ORGAO DESTINO"]&&(o.ÓRGÃO=s["ORGAO DESTINO"]),s.ÓRGÃO&&(o.ÓRGÃO=s.ÓRGÃO),s.ÁREA&&(o.ÁREA=s.ÁREA),s.AREA&&(o.ÁREA=s.AREA),s["DATA EXONERAÇÃO"]&&(o["DATA EXONERAÇÃO"]=s["DATA EXONERAÇÃO"]),s["DATA EXONERACAO"]&&(o["DATA EXONERAÇÃO"]=s["DATA EXONERACAO"]),w.push(o)}return w};async function a(){for(const x of t)try{const n=x+(x.includes("?")?"&":"?")+`_ts=${Date.now()}`,g=await fetch(n,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!g.ok)continue;let N=await g.text();N=N.replace(/^\uFEFF/,"");const h=r(N);if(!Array.isArray(h)||h.length===0)continue;console.log("Dados carregados:",h.length,"registros"),I(h),S(!1);return}catch(n){console.debug("Falha ao carregar",x,n)}console.warn("Não foi possível carregar dados.csv"),S(!1)}a()},[]);const m=c.useMemo(()=>{if(!l||l.length===0)return["FISCALIZAÇÃO"];const r=Array.from(new Set(l.map(a=>a.ÁREA||a.AREA||"Outros"))).sort();return r.includes("FISCALIZAÇÃO")?["FISCALIZAÇÃO",...r.filter(a=>a!=="FISCALIZAÇÃO")]:r},[l]);c.useEffect(()=>{m.length>0&&!m.includes(p)&&C(m[0])},[m,p]),c.useEffect(()=>{y("")},[p]);const E=c.useMemo(()=>{if(!l||l.length===0)return[];let t=l.filter(r=>(r.ÁREA||r.AREA||"Outros")===p);return f.trim()&&(t=t.filter(r=>(r.NOME||r["Nome do Candidato"]||"").toLowerCase().includes(f.toLowerCase()))),A&&(t=t.filter(r=>(r.PCD||"").toUpperCase()==="SIM")),O&&(t=t.filter(r=>(r.SITUACAO||r.SITUAÇÃO||"NÃO NOMEADO").toUpperCase()===O.toUpperCase())),t.sort((r,a)=>{const x=parseInt(r["POSIÇÃO CONCURSO"]||r["POSICAO CONCURSO"]||"0"),n=parseInt(a["POSIÇÃO CONCURSO"]||a["POSICAO CONCURSO"]||"0");return x-n})},[l,p,f,A,O]),T=(t,r)=>{const a=r%2===0,x=(t==null?void 0:t.toUpperCase())||"NÃO NOMEADO",n={"EM EXERCÍCIO":"bg-green-200","NOMEADO E EXONERADO":"bg-red-200",DESISTENTE:"bg-orange-200","INAPTO ADMISSIONAL":"bg-purple-200","NÃO NOMEADO":a?"bg-white":"bg-gray-200"};return n[x]||n["NÃO NOMEADO"]};return e.jsx("div",{className:"min-h-screen bg-gray-50 text-gray-900 p-2",children:e.jsxs("div",{className:"w-full max-w-none",children:[e.jsx("div",{className:"mb-2",children:e.jsx("a",{href:"/evasao/dist/index.html",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200 shadow-sm",children:"← Voltar ao Dashboard"})}),e.jsx("header",{className:"text-center mb-3",children:e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Auditores Fiscais da Receita Estadual de Minas Gerais"})}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Filtrar por área:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:m.map(t=>e.jsx("button",{onClick:()=>C(t),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400 ${p===t?"bg-red-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300 shadow-sm"}`,children:t},t))})]}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Buscar por nome:"}),e.jsx("input",{type:"text",value:f,onChange:t=>D(t.target.value),placeholder:"Digite o nome do candidato...",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400 w-80 max-w-full"})]}),!j&&E.length>0&&e.jsx("div",{className:"mb-4 text-center text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center items-center",children:[e.jsx("button",{onClick:()=>y(""),className:`px-2 py-1 rounded text-xs transition-colors ${O===""?"bg-blue-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Todos"}),Object.entries(E.reduce((t,r)=>{const a=r.SITUACAO||r.SITUAÇÃO||"NÃO NOMEADO";return t[a]=(t[a]||0)+1,t},{})).map(([t,r])=>e.jsxs("button",{onClick:()=>y(O===t?"":t),className:`px-2 py-1 rounded text-xs transition-colors ${O===t?"bg-red-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[t,": ",e.jsx("span",{className:"font-semibold",children:r})]},t))]})}),e.jsx("div",{className:"bg-white shadow-lg border border-black",children:e.jsx("div",{className:"overflow-x-auto max-h-[80vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-[10px] border-collapse border border-black",children:[e.jsx("thead",{className:"bg-white text-gray-700 uppercase text-[10px] sticky top-0 z-50 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Pos."}),e.jsx("th",{className:"px-1 py-1 text-left font-semibold border border-black bg-white",children:"Nome"}),e.jsx("th",{className:"px-0.5 py-1 text-center font-semibold border border-black bg-white",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("span",{children:"PCD"}),e.jsx("button",{onClick:()=>R(!A),className:`text-[9px] px-0.5 py-0.5 rounded transition-colors ${A?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:A?"Mostrar todos":"Filtrar apenas PCDs",children:e.jsx("i",{className:"fas fa-filter"})})]})}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Situação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Órgão"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Publicação da Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação Sem Efeito"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Observação"})]})}),e.jsx("tbody",{className:"divide-y divide-black",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-6 text-center text-orange-600 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600"}),e.jsx("span",{children:"Carregando dados..."})]})})}):E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-6 text-center text-gray-500 border border-black",children:l&&l.length>0?`Nenhum candidato encontrado para a área ${p}`:"Nenhum dado disponível. Verifique se o arquivo dados.csv foi carregado."})}):E.map((t,r)=>e.jsxs("tr",{className:`${T(t.SITUACAO||t.SITUAÇÃO,r)} hover:brightness-95 hover:shadow-md transition-all duration-150`,children:[e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap font-medium text-gray-800 text-[10px] border border-black text-center",children:t["POSIÇÃO CONCURSO"]||t["POSICAO CONCURSO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 font-medium text-gray-900 text-[10px] border border-black text-left",children:t.NOME||t["Nome do Candidato"]||"-"}),e.jsx("td",{className:"px-0.5 py-0.5 whitespace-nowrap text-center text-[10px] border border-black text-gray-700",children:(t.PCD||"").toUpperCase()==="SIM"?"SIM":"NÃO"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.SITUACAO||t.SITUAÇÃO||"NÃO NOMEADO"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-700 text-[10px] border border-black text-center",children:t.ÓRGÃO||t.ORGAO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t["DATA NOMEAÇÃO"]||t["DATA NOMEACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t["DATA EXONERAÇÃO"]||t["DATA EXONERACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t["DATA PUBLICAÇÃO EXONERAÇÃO"]||t["DATA PUBLICACAO EXONERAÇÃO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t["DATA NOMEAÇÃO SEM EFEITO"]||t["DATA NOMEACAO SEM EFEITO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-600 text-[10px] border border-black text-center whitespace-normal",children:t.OBSERVAÇÃO||t.OBSERVACAO||"-"})]},`${t.INSCRIÇÃO||t.INSCRICAO||r}`))})]})})}),e.jsx("footer",{className:"text-center mt-8 text-gray-500 text-sm",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," Observatório da Evasão. Dados extraídos do Diário Oficial de Minas Gerais."]})})]})})},v=document.getElementById("root");v&&k.createRoot(v).render(e.jsx(M,{}));

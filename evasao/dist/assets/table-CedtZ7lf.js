import{a as d,j as e,c as k}from"./client-uL4xmIh0.js";const U=()=>{const[o,I]=d.useState("FISCALIZAÇÃO"),[l,T]=d.useState([]),[j,w]=d.useState(!0),[u,S]=d.useState(""),[O,v]=d.useState(!1),[g,C]=d.useState("");d.useEffect(()=>{const t=["/data/dados.csv","/evasao/data/dados.csv","data/dados.csv","./data/dados.csv","/evasao/dist/data/dados.csv","/evasao/dist/assets/dados.csv","/evasao/dados.csv","/dados.csv","dist/data/dados.csv","assets/dados.csv"],r=p=>{const n=p.split(/\r?\n/).filter(a=>a.trim()!=="");if(n.length===0)return[];const x=a=>{const N=[];let A="",h=!1;for(let c=0;c<a.length;c++){const y=a[c];if(y==='"'){h&&a[c+1]==='"'?(A+='"',c++):h=!h;continue}if(y===";"&&!h){N.push(A),A="";continue}A+=y}return N.push(A),N},i=n[0],b=x(i).map(a=>a.trim()),E=[];for(let a=1;a<n.length;a++){const N=n[a],A=x(N);for(;A.length<b.length;)A.push("");const h={};for(let c=0;c<b.length;c++)h[b[c]]=A[c]?A[c].trim():"";E.push(h)}return E};async function s(){for(const p of t)try{const n=p+(p.includes("?")?"&":"?")+`_ts=${Date.now()}`,x=await fetch(n,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!x.ok)continue;let i=await x.text();i=i.replace(/^\uFEFF/,"");const b=r(i);if(!Array.isArray(b)||b.length===0)continue;console.log("Dados carregados:",b.length,"registros"),T(b),w(!1);return}catch(n){console.debug("Falha ao carregar",p,n)}console.warn("Não foi possível carregar dados.csv"),w(!1)}s()},[]);const m=d.useMemo(()=>{if(!l||l.length===0)return["FISCALIZAÇÃO"];const r=Array.from(new Set(l.map(s=>s.ÁREA||s.AREA||"Outros"))).sort();return r.includes("FISCALIZAÇÃO")?["FISCALIZAÇÃO",...r.filter(s=>s!=="FISCALIZAÇÃO")]:r},[l]);d.useEffect(()=>{m.length>0&&!m.includes(o)&&I(m[0])},[m,o]),d.useEffect(()=>{C("")},[o]);const f=d.useMemo(()=>{if(!l||l.length===0)return[];let t=l.filter(r=>(r.ÁREA||r.AREA||"Outros")===o);return u.trim()&&(t=t.filter(r=>(r.NOME||r["Nome do Candidato"]||"").toLowerCase().includes(u.toLowerCase()))),O&&(t=t.filter(r=>(r.PCD||"").toUpperCase()==="SIM")),g&&(t=t.filter(r=>(r.SITUACAO||r.SITUAÇÃO||"-").toUpperCase()===g.toUpperCase())),t.sort((r,s)=>{if(o==="VETERANO"){const x=r.DATA_PUBLICACAO_EXONERACAO||r["DATA PUBLICACAO EXONERAÇÃO"]||"",i=s.DATA_PUBLICACAO_EXONERACAO||s["DATA PUBLICACAO EXONERAÇÃO"]||"";if(x&&i){const a=i.localeCompare(x);if(a!==0)return a}else{if(x&&!i)return-1;if(!x&&i)return 1}const b=r.DATA_PUBLICACAO_INATIVIDADE||r["DATA PUBLICACAO INATIVIDADE"]||"";return(s.DATA_PUBLICACAO_INATIVIDADE||s["DATA PUBLICACAO INATIVIDADE"]||"").localeCompare(b)}const p=parseInt(r.POSICAO_CONCURSO||r["POSICAO CONCURSO"]||"0"),n=parseInt(s.POSICAO_CONCURSO||s["POSICAO CONCURSO"]||"0");return p-n})},[l,o,u,O,g]),R=(t,r)=>{const s=r%2===0,p=(t==null?void 0:t.toUpperCase())||"-",n={"EM EXERCÍCIO":s?"bg-green-200":"bg-green-200/75",EXONERADO:s?"bg-red-200":"bg-red-200/85",DESISTENTE:s?"bg-orange-200":"bg-orange-200/85","INAPTO ADMISSIONAL":s?"bg-fuchsia-200":"bg-fuchsia-200/85",APOSENTADO:s?"bg-purple-400":"bg-purple-400/85","AFASTAMENTO PRELIMINAR À APOSENTADORIA":s?"bg-teal-200":"bg-teal-200/85","-":s?"bg-white":"bg-gray-100"};return n[p]||n["-"]};return e.jsx("div",{className:"min-h-screen bg-gray-50 text-gray-900 p-2",children:e.jsxs("div",{className:"w-full max-w-none",children:[e.jsx("div",{className:"mb-2",children:e.jsx("a",{href:"/evasao/dist/index.html",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors duration-200 shadow-sm",children:"← Voltar ao Dashboard"})}),e.jsx("header",{className:"text-center mb-3",children:e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Auditores Fiscais da Receita Estadual de Minas Gerais"})}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Filtrar por área:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:m.map(t=>e.jsx("button",{onClick:()=>I(t),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400 ${o===t?"bg-red-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300 shadow-sm"}`,children:t},t))})]}),e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1 font-medium",children:"Buscar por nome:"}),e.jsx("input",{type:"text",value:u,onChange:t=>S(t.target.value),placeholder:"Digite o nome do candidato...",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400 w-80 max-w-full"})]}),!j&&f.length>0&&e.jsx("div",{className:"mb-4 text-center text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center items-center",children:[e.jsx("button",{onClick:()=>C(""),className:`px-2 py-1 rounded text-xs transition-colors ${g===""?"bg-blue-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Todos"}),Object.entries(f.reduce((t,r)=>{const s=r.SITUACAO||r.SITUAÇÃO||"-";return t[s]=(t[s]||0)+1,t},{})).map(([t,r])=>e.jsxs("button",{onClick:()=>C(g===t?"":t),className:`px-2 py-1 rounded text-xs transition-colors ${g===t?"bg-red-500 text-white font-semibold":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[t,": ",e.jsx("span",{className:"font-semibold",children:r})]},t))]})}),e.jsx("div",{className:"bg-white shadow-lg border border-black",children:e.jsx("div",{className:"overflow-x-auto max-h-[80vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-[10px] border-collapse border border-black",children:[e.jsx("thead",{className:"bg-white text-gray-700 uppercase text-[10px] sticky top-0 z-50 shadow-sm",children:e.jsx("tr",{children:o==="VETERANO"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-1 py-1 text-left font-semibold border border-black bg-white",children:"NOME"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"SITUAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"ÓRGÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA EXONERAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA DE PUBLICAÇÃO DA EXONERAÇÃO"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA INATIVIDADE"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"DATA DE PUBLICAÇÃO DA INATIVIDADE"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"OBSERVAÇÃO"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Pos."}),e.jsx("th",{className:"px-1 py-1 text-left font-semibold border border-black bg-white",children:"Nome"}),e.jsx("th",{className:"px-0.5 py-1 text-center font-semibold border border-black bg-white",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("span",{children:"PCD"}),e.jsx("button",{onClick:()=>v(!O),className:`text-[9px] px-0.5 py-0.5 rounded transition-colors ${O?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:O?"Mostrar todos":"Filtrar apenas PCDs",children:e.jsx("i",{className:"fas fa-filter"})})]})}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Situação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Órgão"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Publicação da Exoneração"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Data de Nomeação Sem Efeito"}),e.jsx("th",{className:"px-1 py-1 text-center font-semibold border border-black bg-white",children:"Observação"})]})})}),e.jsx("tbody",{className:"divide-y divide-black",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:o==="VETERANO"?6:10,className:"px-4 py-6 text-center text-orange-600 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600"}),e.jsx("span",{children:"Carregando dados..."})]})})}):f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:o==="VETERANO"?6:10,className:"px-4 py-6 text-center text-gray-500 border border-black",children:l&&l.length>0?`Nenhum candidato encontrado para a área ${o}`:"Nenhum dado disponível. Verifique se o arquivo dados.csv foi carregado."})}):f.map((t,r)=>e.jsx("tr",{className:`${R(t.SITUACAO||t.SITUAÇÃO,r)} hover:brightness-95 hover:shadow-md transition-all duration-150`,children:o==="VETERANO"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-1 py-0.5 font-medium text-gray-900 text-[10px] border border-black text-left",children:t.NOME||t["Nome do Candidato"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.SITUACAO||t.SITUAÇÃO||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-700 text-[10px] border border-black text-center",children:t.ÓRGÃO||t.ORGAO_DESTINO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_EXONERACAO||t["DATA EXONERACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_EXONERACAO||t["DATA PUBLICACAO EXONERAÇÃO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_INATIVIDADE||t["DATA INATIVIDADE"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_INATIVIDADE||t["DATA PUBLICACAO INATIVIDADE"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-600 text-[10px] border border-black text-center whitespace-normal",children:t.OBSERVAÇÃO||t.OBSERVACAO||"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap font-medium text-gray-800 text-[10px] border border-black text-center",children:t.POSICAO_CONCURSO||t["POSICAO CONCURSO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 font-medium text-gray-900 text-[10px] border border-black text-left",children:t.NOME||t["Nome do Candidato"]||"-"}),e.jsx("td",{className:"px-0.5 py-0.5 whitespace-nowrap text-center text-[10px] border border-black text-gray-700",children:(t.PCD||"").toUpperCase()==="SIM"?"SIM":"NÃO"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.SITUACAO||t.SITUAÇÃO||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-700 text-[10px] border border-black text-center",children:t.ÓRGÃO||t.ORGAO_DESTINO||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t["DATA NOMEAÇÃO"]||t["DATA NOMEACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_EXONERACAO||t["DATA EXONERACAO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_PUBLICACAO_EXONERACAO||t["DATA PUBLICACAO EXONERAÇÃO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 whitespace-nowrap text-gray-700 text-[10px] border border-black text-center",children:t.DATA_NOMEACAO_SEM_EFEITO||t["DATA NOMEACAO SEM EFEITO"]||"-"}),e.jsx("td",{className:"px-1 py-0.5 text-gray-600 text-[10px] border border-black text-center whitespace-normal",children:t.OBSERVAÇÃO||t.OBSERVACAO||"-"})]})},`${t.INSCRIÇÃO||t.INSCRICAO||r}`))})]})})}),e.jsx("footer",{className:"text-center mt-8 text-gray-500 text-sm",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," Observatório da Evasão. Dados extraídos do Diário Oficial de Minas Gerais e outras fontes públicas."]})})]})})},D=document.getElementById("root");D&&k.createRoot(D).render(e.jsx(U,{}));
